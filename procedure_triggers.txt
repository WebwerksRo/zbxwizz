step 1. create groups sheet
IMPORT site names from CSV
generate group name
PULL group IDs by looking up group names
{
  "filter":
    {"name":"${flds.Groups}"}
}

step 2. create hosts sheet
IMPORT hosts beloging to said groupid
{
  "groupids":${json(worksheets.sheets.sheet1.col(2))},
  "output":["name","host","hostid"],
  "selectTags":["tag","value"],
  "selectHostGroups":["name","groupid"]
}
extract hostid with transformation
    data.csv.hosts[0].hostid
and rename column as "hostid"

step 3. create hosts triggers sheet
- IMPORT triggers beloging to above hosts
{
  "hostids":${json(worksheets.sheets.sheet2.col("hostid"))},
  "output":["triggerid","expression","description"],
  "selectDependencies":["extend"],
  "selectHosts":["hostid"]
}
extract hostid with transformation
    data.csv.hosts[0].hostid
and rename column as "hostid"

step 4. create SITE_CONNECTIVITY triggers  SHEET
- import SITE CONNECTIVITY triggers
{
  "hostids":${json(worksheets.sheets.sheet2.col("hostid"))},
  "output":["triggerid","expression","description"],
  "selectDependencies":["extend"],
  "selectHosts":["hostid"],
  "searchWildcardsEnabled":true,
  "search":{
    "description":"*SITE CONNECTIVITY is DOWN*"
  }
}
- extract hostid
data.csv.hosts[0].hostid


step 5:
in host triggers sheet, xtract depending trigger  from SITE_CONNECTIVITY triggers  SHEET
ws.sheet5.lookup(flds.hostid,"col4","triggerid")
ws.sheet5.lookup(flds.hosts,"col4","triggerid")

step 6:
create new dependencies set
flds.col5==flds.triggerid ? cols[4] : json(data.csv.dependencies.filter(s=>s.triggerid!=flds.col5).concat([{triggerid:flds.col5}]))